<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kegiatan Harian Ramadhan ‚Äî Interaktif</title>
  <meta name="description" content="Panduan harian Ramadhan interaktif: sahur, subuh, dhuha, dzuhur, ashar, berbuka, isya, dan malam." />
  <style>
    :root{
      --bg:#fbfbfb; --card:#ffffff; --accent:#2f9e44; --muted:#6b7280; --glass:rgba(255,255,255,0.6);
      --glass-dark:rgba(20,20,20,0.6); --secondary:#f59e0b; --gradient:linear-gradient(135deg, #2f9e44 0%, #3b82f6 100%);
      --gradient-hover:linear-gradient(135deg, #60a86b 0%, #60a5fa 100%);
    }
    [data-theme="dark"]{
      --bg:#0f1720; --card:#0b1220; --accent:#6ee7b7; --muted:#9aa4b2; --glass:var(--glass-dark);
      --secondary:#fbbf24; --gradient:linear-gradient(135deg, #6ee7b7 0%, #60a5fa 100%);
      --gradient-hover:linear-gradient(135deg, #a7f3d0 0%, #93c5fd 100%);
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg, #f7fff7 0%, var(--bg) 100%); color:#0b1220; -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale; padding-bottom:48px;
    }
    header{
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      background:linear-gradient(90deg,var(--accent),#60a86b); color:#fff;
      position:sticky; top:0; z-index:40; box-shadow:0 6px 18px rgba(15,23,32,0.08);
      padding:18px; border-radius:0 0 20px 20px; animation:slideDown 0.5s ease;
    }
    .brand{display:flex; gap:12px; align-items:center}
    .logo{
      width:48px; height:48px; border-radius:12px; background:rgba(255,255,255,0.18);
      display:grid; place-items:center; font-weight:700; font-size:20px;
      box-shadow:0 4px 12px rgba(0,0,0,0.15); animation:pulse 2s infinite;
      overflow: hidden; /* Memastikan gambar tidak keluar dari radius */
    }
    .logo img {
      width: 100%;
      height: 100%;
      object-fit: cover; /* Menyesuaikan gambar agar pas di kotak */
    }
    @keyframes pulse{
      0%, 100%{transform:scale(1)}
      50%{transform:scale(1.05)}
    }
    header h1{font-size:18px; margin:0}
    header p{margin:0; font-size:12px; opacity:0.95}
    .controls{display:flex; gap:8px; align-items:center}
    .theme-toggle{
      background:transparent; border:1px solid rgba(255,255,255,0.18); padding:10px; border-radius:12px;
      cursor:pointer; font-size:18px; width:44px; height:44px; display:grid; place-items:center;
      transition:transform 0.3s ease, background 0.3s ease;
    }
    .theme-toggle:hover{transform:rotate(15deg) scale(1.1); background:rgba(255,255,255,0.1)}
    .container{max-width:980px; margin:20px auto; padding:12px}
    .nav{
      display:flex; gap:8px; flex-wrap:wrap; margin-bottom:14px; justify-content:center;
    }
    .nav button{
      background:var(--card); border:2px solid transparent; padding:12px 16px; border-radius:12px; cursor:pointer;
      font-weight:600; color:var(--accent); box-shadow:0 6px 18px rgba(47,158,68,0.08);
      transition:all 0.3s ease; flex:1; min-width:100px; position:relative; overflow:hidden;
    }
    .nav button::after{
      content:''; position:absolute; bottom:0; left:0; width:100%; height:3px;
      background:var(--gradient); transform:scaleX(0); transition:transform 0.3s ease;
    }
    .nav button:hover{transform:translateY(-5px); box-shadow:0 12px 24px rgba(47,158,68,0.15); border-color:var(--accent)}
    .nav button:hover::after{transform:scaleX(1)}
    .nav button.active{
      background:var(--gradient); color:white; border-color:transparent; box-shadow:0 8px 20px rgba(47,158,68,0.2);
    }
    .nav button.active::after{display:none}
    .card{
      background:var(--card); border-radius:16px; padding:20px; box-shadow:0 10px 30px rgba(2,6,23,0.08);
      margin-bottom:14px; overflow:hidden; border:1px solid rgba(15,23,32,0.05);
      transition:transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover{transform:translateY(-5px); box-shadow:0 15px 35px rgba(2,6,23,0.12)}
    .section-title{display:flex; align-items:center; gap:12px}
    .section-title h2{
      margin:0; background:var(--gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      background-clip:text; font-size:20px; font-weight:800;
    }
    .time-badge{
      background:var(--gradient); color:white; padding:6px 12px; border-radius:20px;
      font-size:14px; font-weight:600; animation:fadeIn 0.5s ease;
    }
    .section-desc{color:var(--muted); font-size:14px; margin-top:6px; line-height:1.5}
    ul.checklist{list-style:none; padding:0; margin:12px 0 0 0; display:grid; gap:10px}
    ul.checklist li{
      display:flex; align-items:center; gap:12px; padding:14px; border-radius:12px;
      border:1px solid rgba(15,23,32,0.08); background:linear-gradient(180deg, rgba(0,0,0,0.01), transparent);
      transition:all 0.3s ease; cursor:pointer;
    }
    ul.checklist li:hover{
      transform:translateX(5px); box-shadow:0 5px 15px rgba(0,0,0,0.05);
      border-color:var(--accent);
    }
    ul.checklist li.checked{
      background:rgba(47,158,68,0.05); border-color:rgba(47,158,68,0.3);
      opacity:0.8;
    }
    ul.checklist li.checked .text{text-decoration:line-through; opacity:0.7}
    ul.checklist li .text{flex:1; font-size:15px}
    .icon{
      width:25px; height:25px; border-radius:7px; display:grid; place-items:center; font-size:15px;
      transition:transform 0.3s ease;
    }
    ul.checklist li:hover .icon{transform:scale(1.1)}
    .moon{background:linear-gradient(135deg,#fff,#f1fff1); color:var(--accent)}
    .pray{background:linear-gradient(135deg,#fff,#fff7f1); color:#f59e0b}
    .small{font-size:13px; color:var(--muted)}
    .actions{display:flex; gap:10px; align-items:center; margin-top:16px}
    .chip{
      padding:8px 14px; border-radius:999px; background:rgba(47,158,68,0.08); color:var(--accent);
      font-weight:600; font-size:14px; display:flex; align-items:center; gap:6px;
    }
    .fade{animation:fadeIn .5s ease both}
    @keyframes fadeIn{
      from{opacity:0; transform:translateY(10px)} 
      to{opacity:1; transform:none}
    }
    @keyframes slideDown{
      from{transform:translateY(-100%)} 
      to{transform:translateY(0)}
    }
    .share-section{
      text-align:center; margin:24px auto; max-width:500px;
    }
    .share-btn{
      background:var(--gradient); color:white; border:none; padding:14px 28px; border-radius:12px;
      font-weight:600; font-size:16px; cursor:pointer; transition:all 0.3s ease;
      display:inline-flex; align-items:center; gap:10px; box-shadow:0 8px 20px rgba(47,158,68,0.2);
    }
    .share-btn:hover{
      background:var(--gradient-hover); transform:translateY(-3px); box-shadow:0 12px 25px rgba(47,158,68,0.3);
    }
    .stats{
      display:flex; gap:12px; margin-top:16px; justify-content:center; flex-wrap:wrap;
    }
    .stat-card{
      background:var(--card); padding:12px 16px; border-radius:12px; text-align:center;
      min-width:100px; box-shadow:0 4px 12px rgba(0,0,0,0.05);
    }
    .stat-value{font-size:24px; font-weight:800; background:var(--gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;}
    .stat-label{font-size:12px; color:var(--muted); margin-top:4px}
    /* mobile */
    @media (max-width:640px){
      header{padding:14px}
      .nav button{flex:1 1 45%; min-width:0; padding:10px 12px; font-size:13px}
      .logo{width:44px;height:44px}
      .section-title h2{font-size:18px}
      .share-btn{width:100%; justify-content:center}
    }
    /* progress bar */
    .progress-wrap{
      height:10px; background:linear-gradient(90deg,#e6f6ea,#f0fff4); border-radius:999px; overflow:hidden;
      margin-top:16px; position:relative;
    }
    .progress{
      height:100%; background:var(--gradient); width:0%; border-radius:999px;
      transition:width 0.5s ease; position:relative; overflow:hidden;
    }
    .progress::after{
      content:''; position:absolute; top:0; left:0; right:0; bottom:0;
      background:linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation:shimmer 2s infinite;
    }
    @keyframes shimmer{
      0%{transform:translateX(-100%)}
      100%{transform:translateX(100%)}
    }
    /* footer */
    footer{
      max-width:980px; margin:24px auto; padding:12px; color:var(--muted); font-size:13px; text-align:center;
      border-top:1px solid rgba(15,23,32,0.05); padding-top:20px;
    }
    /* confetti effect */
    .confetti{
      position:fixed; width:10px; height:10px; background:var(--accent); top:-10px; z-index:1000;
      animation:confetti-fall 3s linear forwards;
    }
    @keyframes confetti-fall{
      to{transform:translateY(100vh) rotate(360deg); opacity:0;}
    }
    .motivation-toast {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: linear-gradient(135deg, var(--gradient));
  color: grey;
  padding: 16px 20px;
  border-radius: 16px;
  box-shadow: 0 12px 40px rgba(47, 158, 68, 0.3);
  font-size: 14px;
  font-weight: 600;
  max-width: 300px;
  z-index: 10000;
  opacity: 0;
  transform: translateY(100px);
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  backdrop-filter: blur(12px);
}
.motivation-toast.show {
  opacity: 1;
  transform: translateY(0);
}
.motivation-toast:hover {
  transform: translateY(-4px);
  box-shadow: 0 16px 50px rgba(47, 158, 68, 0.4);
}

  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">
        <img src="https://muin123-dr.github.io/Website/gen%20zehat.png" alt="Gen Zehat Logo">
      </div>
      <div>
        <h1>Kegiatan Harian Ramadhan</h1>
        <p>Rutinitas pilihan selama Ramadhan</p>
      </div>
    </div>
    <div class="controls">
      <button class="theme-toggle" id="themeBtn" title="Ganti tema">üåô</button>
    </div>
  </header>

  <main class="container">
    <div class="card fade">
      <div class="section-title">
        <h2>Daftar Kegiatan</h2>
        <div class="chip" id="dateChip">
          <span>üìÖ</span>
          <span id="dateText"></span>
        </div>
      </div>
      <p class="section-desc">Pilih salah satu waktu di bawah. Checklist akan disimpan otomatis!</p>
      
      </div>
      <div style="margin-top:16px" class="progress-wrap" aria-hidden="true">
        <div class="progress" id="progressBar"></div>
      </div>
    </div>

    <nav class="nav" role="tablist" aria-label="Navigasi waktu">
      <button data-target="sahur" class="active">üåô Sahur</button>
      <button data-target="subuh">üïå Subuh</button>
      <button data-target="pagi">‚òÄÔ∏è Pagi</button>
      <button data-target="dzuhur">üïã Dzuhur</button>
      <button data-target="ashar">üå§Ô∏è Ashar</button>
      <button data-target="menjelang">‚è≥ Menjelang</button>
      <button data-target="berbuka">üçΩÔ∏è Berbuka</button>
      <button data-target="maghrib">üåá Maghrib</button>
      <button data-target="isya">üåô Isya</button>
      <button data-target="tidur">üåå Tidur</button>
    </nav>

    <section id="contentArea"></section>

    <div class="stats">
        <div class="stat-card">
          <div class="stat-value" id="totalTasks">0</div>
          <div class="stat-label">Total Kegiatan</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="completedTasks">0</div>
          <div class="stat-label">Selesai</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="progressPercent">0%</div>
          <div class="stat-label">Progress</div>
        </div>
      </div>
      <div style="margin-top:16px" class="progress-wrap" aria-hidden="true">
        <div class="progress" id="progressBar"></div>
      </div>

    <div class="card fade" style="display:flex;flex-direction:column;gap:12px">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>‚ú® Tips Ramadhan Gen Z üöÄ</strong>
        
      </div>
      <div class="small">
        ‚Ä¢ Gunakan checklist untuk bangun habit baru<br>
        ‚Ä¢ Mode gelap buat mata nyaman di malam hari<br>
        ‚Ä¢ Share ke teman buat challenge bersama!<br>
        ‚Ä¢ Reset tiap hari untuk progress maksimal
      </div>
    </div>

    <div class="share-section">
      <button class="share-btn" id="shareBtn">
        <span>üì±</span>
        Bagikan ke Teman
      </button>
      <p class="small" style="margin-top:8px">Ajak teman-temanmu untuk ikutan challenge Ramadhan ini!</p>
    </div>
  </main>

  <footer>
    @Gen Zehat - 2026<br>dr. Muin
  </footer>

  <script>
    // Data kegiatan dengan penambahan emoji
    const data = {
      sahur: {
        title: "üåô Waktu Sahur",
        desc: "Bulatkan Tekat & Berdo'a semoga dikuatkan!",
        items: ["Niat puasa dengan ikhlas","Makan sahur bergizi","Banyak doa dan dzikir ketika sahur","Banyak Istighfar","Dzikir pagi","Memperbanyak doa","Tilawah Al-Qur'an 1 juz"],
        icon: "üåô"
      },
      subuh: {
        title: "üïå Waktu Subuh",
        desc: "Bergegaslah menuju Masjid!",
        items: ["Shalat Tahiyatul Masjid","Shalat Sunnah Qabliyah Subuh","Shalat Subuh berjamaah","Dzikir ba'da sholat","Dzikir pagi lengkap","Tilawah Al-Qur'an"],
        icon: "üïå"
      },
      pagi: {
        title: "‚òÄÔ∏è Waktu Pagi",
        desc: "Produktif dengan niat ibadah!",
        items: ["Olahraga ringan 10 menit","Shalat Dhuha","Bekerja/belajar dengan niat ibadah","Sedekah online/offline","Mendengarkan podcast islami","Membaca buku islami 10 menit","Tilawah Al-Qur'an"],
        icon: "‚òÄÔ∏è"
      },
      dzuhur: {
        title: "üïã Waktu Dzuhur",
        desc: "Istirahat sejenak dan shalat!",
        items: ["Shalat Tahiyatul Masjid","Shalat qobliyah Dzuhur","Shalat Dzuhur berjamaah","Dzikir ba'da sholat","Shalat ba'diyah Dzuhur","Qailulah (tidur siang 20 menit)","Tilawah Al-Qur'an"],
        icon: "üïã"
      },
      ashar: {
        title: "üå§Ô∏è Waktu Ashar",
        desc: "Tetap Semangat, selesaikan perjalanan!",
        items: ["Shalat Tahiyatul Masjid","Shalat Ashar berjamaah","Dzikir ba'da sholat","Dzikir petang","Memperbanyak shalawat","Tilawah Al-Qur'an"],
        icon: "üå§Ô∏è"
      },
      menjelang: {
        title: "‚è≥ Jelang Buka",
        desc: "Waktu yang penuh berkah. Doamu mustajab!",
        items: ["Banyak doa dan dzikir saat menunggu buka","Memperbanyak doa untuk diri & keluarga","Perbanyak Istighfar","Tilawah Al-Qur'an"],
        icon: "‚è≥"
      },
      berbuka: {
        title: "üçΩÔ∏è Waktu Berbuka",
        desc: "Saatnya berbuka. Alhamdulillah!",
        items: ["Menyiapkan/membagikan takjil ke tetangga","Membaca doa berbuka puasa dengan khusyuk","Berbuka dengan kurma/air","Tilawah Al-Qur'an"],
        icon: "üçΩÔ∏è"
      },
      maghrib: {
        title: "üåá Waktu Maghrib",
        desc: "Shalat, makan secukupnya, jangan balas dendam!",
        items: ["Shalat Tahiyatul Masjid","Shalat Maghrib berjamaah","Shalat ba'diyah Maghrib","Makan malam secukupnya","Silaturahmi online/offline","Tilawah Al-Qur'an"],
        icon: "üåá"
      },
      isya: {
        title: "üåô Waktu Isya'",
        desc: "Jangan disia-siakan!",
        items: ["Shalat Tahiyatul Masjid","Shalat Isya berjamaah","Shalat ba'diyah Isya","Shalat Tarawih 8/20 rakaat","Shalat Witir","Tadarus Al-Qur'an bersama keluarga","Mempelajari tafsir Al-Qur'an","Itikaf di 10 malam terakhir"],
        icon: "üåô"
      },
      tidur: {
        title: "üåå Menjelang Tidur",
        desc: "Istirahat, sekaligus Persiapan!",
        items: ["Muhasabah (evaluasi diri hari ini)","Taubat atas kesalahan","Wudhu sebelum tidur","Doa dan dzikir sebelum tidur","Memperbanyak shalawat","Segera Tidur", "Shalat Tahajud/Qiyamul Lail (jika bangun)","Tilawah Al-Qur'an terakhir"],
        icon: "üåå"
      }
    };

    // Utilities
    const contentArea = document.getElementById('contentArea');
    const navButtons = document.querySelectorAll('.nav button');
    const dateText = document.getElementById('dateText');
    const progressBar = document.getElementById('progressBar');
    const themeBtn = document.getElementById('themeBtn');
    const shareBtn = document.getElementById('shareBtn');
    const totalTasksEl = document.getElementById('totalTasks');
    const completedTasksEl = document.getElementById('completedTasks');
    const progressPercentEl = document.getElementById('progressPercent');

    // Initialize date
    const today = new Date();
    const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
    dateText.textContent = today.toLocaleDateString('id-ID', options);

    // Load theme from localStorage
    const savedTheme = localStorage.getItem('ramadhan_theme') || 'light';
    if(savedTheme === 'dark'){
      document.documentElement.setAttribute('data-theme','dark');
      themeBtn.textContent = '‚òÄÔ∏è';
    } else {
      themeBtn.textContent = 'üåô';
    }

    // Theme toggle with icon
    themeBtn.addEventListener('click', () => {
      const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
      if(isDark){
        document.documentElement.removeAttribute('data-theme');
        localStorage.setItem('ramadhan_theme','light');
        themeBtn.textContent = 'üåô';
      } else {
        document.documentElement.setAttribute('data-theme','dark');
        localStorage.setItem('ramadhan_theme','dark');
        themeBtn.textContent = '‚òÄÔ∏è';
      }
      // Add animation
      themeBtn.style.transform = 'rotate(360deg)';
      setTimeout(() => { themeBtn.style.transform = ''; }, 300);
    });

    // Share function with WhatsApp
    shareBtn.addEventListener('click', () => {
      const message = encodeURIComponent("Assalamu'alaikum! üåô‚ú® Yuk ikutan *Ramadhan Challenge* dengan panduan harian yang keren dan interaktif ini! Ada checklist, progress tracker, dan fitur lengkap buat puasa makin bermakna üöÄ\n\n" + location.href + "\n\n#RamadhanBerkah #ChallengeRamadhan");
      const waUrl = `https://wa.me/?text=${message}`;
      window.open(waUrl, '_blank');
      
      // Confetti effect
      createConfetti();
    });

    // Confetti effect
    function createConfetti() {
      const colors = ['#2f9e44', '#3b82f6', '#f59e0b', '#8b5cf6', '#10b981'];
      for(let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.width = Math.random() * 10 + 5 + 'px';
        confetti.style.height = Math.random() * 10 + 5 + 'px';
        confetti.style.animationDelay = Math.random() * 2 + 's';
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 3000);
      }
    }

    // Render section dengan animasi dan highlight
    function renderSection(key){
      const obj = data[key];
      const saved = JSON.parse(localStorage.getItem('ramadhan_check')) || {};
      const checked = saved[key] || [];
      
      // Update nav buttons active state
      navButtons.forEach(btn => {
        btn.classList.remove('active');
        if(btn.dataset.target === key) btn.classList.add('active');
      });

      let html = `
        <div class="card fade" role="region" aria-labelledby="${key}-title">
          <div class="section-title">
            <div class="icon moon" aria-hidden="true">${obj.icon}</div>
            <div>
              <h2 id="${key}-title">${obj.title}</h2>
              <div class="time-badge">${obj.desc}</div>
            </div>
          </div>
          <ul class="checklist" id="list-${key}">
            ${obj.items.map((it, idx) => `
              <li data-idx="${idx}" class="${checked.includes(idx) ? 'checked' : ''}">
                <div class="icon pray" aria-hidden="true">${checked.includes(idx) ? '‚úì' : '‚ú¶'}</div>
                <div class="text">
                  <div style="display:flex;justify-content:space-between;align-items:center">
                    <div>${it}</div>
                    <div style="display:flex;gap:8px;align-items:center">
                      <label class="small" style="margin-right:8px">‚úÖ Selesai</label>
                      <input type="checkbox" ${checked.includes(idx) ? 'checked' : ''} data-key="${key}" data-idx="${idx}" />
                    </div>
                  </div>
                </div>
              </li>
            `).join('')}
          </ul>
          <div class="actions">
            <button class="btn" id="reset-${key}" style="background:transparent;border:1px solid var(--muted);color:var(--muted);padding:10px 16px;border-radius:10px;cursor:pointer;">üîÑ Reset</button>
            <div style="flex:1"></div>
            <button class="btn" id="copy-${key}" style="background:var(--accent);color:white;border:none;padding:10px 16px;border-radius:10px;cursor:pointer;">üìã Salin List</button>
          </div>
        </div>
      `;
      
      // Add animation
      contentArea.style.opacity = '0';
      setTimeout(() => {
        contentArea.innerHTML = html;
        contentArea.style.opacity = '1';
        
        // attach listeners
        document.querySelectorAll(`#list-${key} input[type="checkbox"]`).forEach(cb => {
          cb.addEventListener('change', (e) => {
            const k = e.target.dataset.key;
            const i = Number(e.target.dataset.idx);
            const li = e.target.closest('li');
            const icon = li.querySelector('.icon');
            
            if(e.target.checked){
              li.classList.add('checked');
              icon.textContent = '‚úì';
              icon.style.background = 'linear-gradient(135deg, #d1fae5, #bbf7d0)';
              icon.style.color = '#059669';
              // Add bounce effect
              icon.style.transform = 'scale(1.2)';
              setTimeout(() => { icon.style.transform = 'scale(1)'; }, 300);
            } else {
              li.classList.remove('checked');
              icon.textContent = '‚ú¶';
              icon.style.background = 'linear-gradient(135deg,#fff,#fff7f1)';
              icon.style.color = '#f59e0b';
            }
            toggleCheck(k,i,e.target.checked);
          });
        });
        
        document.getElementById(`reset-${key}`).addEventListener('click', () => {
          if(confirm('Yakin mau reset checklist untuk bagian ini?')){
            resetSection(key);
          }
        });
        
        document.getElementById(`copy-${key}`).addEventListener('click', () => {
          copyList(key);
        });
        
        updateProgress();
      }, 200);
    }

    // Toggle check dengan sound effect (simulasi)
    function toggleCheck(key, idx, state){
      const saved = JSON.parse(localStorage.getItem('ramadhan_check')) || {};
      saved[key] = saved[key] || [];
      if(state){
        if(!saved[key].includes(idx)) saved[key].push(idx);
        // Play sound (simulated)
        if(typeof Audio !== 'undefined'){
          const audio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAZGF0YQ');
          audio.play().catch(() => {});
        }
      } else {
        saved[key] = saved[key].filter(n => n !== idx);
      }
      localStorage.setItem('ramadhan_check', JSON.stringify(saved));
      updateProgress();
    }

    function resetSection(key){
      const saved = JSON.parse(localStorage.getItem('ramadhan_check')) || {};
      delete saved[key];
      localStorage.setItem('ramadhan_check', JSON.stringify(saved));
      renderSection(key);
    }

    function copyList(key){
      const obj = data[key];
      const text = `*${obj.title}*\n\n${obj.items.map((it,i)=>`${i+1}. ${it}`).join('\n')}\n\n#RamadhanChallenge`;
      navigator.clipboard?.writeText(text).then(()=> {
        alert('‚úÖ Daftar berhasil disalin! Bisa share ke WhatsApp ya!');
      }, ()=> alert('‚ùå Gagal menyalin'));
    }

    // Update progress bar dengan statistik
    function updateProgress(){
      const saved = JSON.parse(localStorage.getItem('ramadhan_check')) || {};
      let total = 0, done = 0;
      Object.keys(data).forEach(k => {
        total += data[k].items.length;
        const arr = saved[k] || [];
        done += arr.length;
      });
      
      const pct = total ? Math.round((done/total)*100) : 0;
      progressBar.style.width = pct + '%';
      progressBar.setAttribute('aria-valuenow', pct);
      
      // Update stats
      totalTasksEl.textContent = total;
      completedTasksEl.textContent = done;
      progressPercentEl.textContent = pct + '%';
      
      // Progress celebration
      if(pct === 100){
        createConfetti();
        setTimeout(() => {
          alert('üéâ SELAMAT! Kamu telah menyelesaikan semua checklist hari ini! Terus pertahankan ya!');
        }, 500);
      }
    }

    // Nav click dengan efek
    navButtons.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const key = e.target.dataset.target;
        renderSection(key);
        // Smooth scroll dengan offset
        setTimeout(() => {
          contentArea.scrollIntoView({behavior:'smooth', block:'start'});
        }, 100);
      });
    });

    // Default open dengan pesan menarik
    contentArea.innerHTML = `
      <div class="card fade" style="text-align:center; padding:20px 10px;">
        <div style="font-size:38px; margin-bottom:16px;">üåô‚ú®</div>
        <h2 style="color:var(--accent); margin-bottom:12px;">Selamat Datang di Ramadhan Challenge!</h2>
        <p class="section-desc">Pilih salah satu waktu di atas untuk mulai checklist kegiatan harianmu.</p>
        <p class="small" style="margin-top:16px;">üî• <strong>Challenge:</strong> Coba selesaikan semua checklist hari ini!</p>
        <div style="display:flex; justify-content:center; gap:10px; margin-top:20px;">
          <span class="chip">üìä Progress Tracker</span>
          <span class="chip">‚úÖ Auto Save</span>
          <span class="chip">üåô Mode Gelap</span>
        </div>
      </div>
    `;

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if(e.key === 'ArrowRight' || e.key === 'ArrowLeft'){
        const keys = Array.from(navButtons).map(b => b.dataset.target);
        const current = contentArea.querySelector('h2')?.id?.replace('-title','') || 'sahur';
        let idx = keys.indexOf(current);
        if(e.key === 'ArrowRight') idx = (idx + 1) % keys.length;
        else idx = (idx - 1 + keys.length) % keys.length;
        renderSection(keys[idx]);
      }
      // Space to toggle check
      if(e.key === ' ' && e.target.type === 'checkbox'){
        e.target.click();
      }
    });

    // Initialize
    window.addEventListener('load', () => {
      updateProgress();
      // Add hover effects to cards
      document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('mouseenter', function() {
          this.style.transform = 'translateY(-5px)';
        });
        card.addEventListener('mouseleave', function() {
          this.style.transform = 'translateY(0)';
        });
      });
    });

    // Export/Import feature dengan UI lebih menarik
    document.querySelector('header').addEventListener('dblclick', () => {
      const action = confirm('üéØ Fitur Admin:\nKlik OK untuk export data, Cancel untuk import?');
      if(action === true){
        exportData();
      } else {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        input.onchange = e => {
          const file = e.target.files[0];
          const reader = new FileReader();
          reader.onload = () => {
            try{
              const obj = JSON.parse(reader.result);
              localStorage.setItem('ramadhan_check', JSON.stringify(obj));
              alert('‚úÖ Data berhasil diimpor!');
              const current = contentArea.querySelector('h2')?.id?.replace('-title','') || 'sahur';
              renderSection(current);
            }catch(err){ alert('‚ùå File tidak valid'); }
          };
          reader.readAsText(file);
        };
        input.click();
      }
    });

    function exportData(){
      const payload = localStorage.getItem('ramadhan_check') || '{}';
      const blob = new Blob([payload], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'ramadhan-progress-' + new Date().toISOString().split('T')[0] + '.json';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      alert('‚úÖ Data berhasil diexport!');
    }

    // Daily motivation quotes
    const quotes = [
      "Ramadhan bukan alasan untuk bermalas-malasan! üí™",
      "Setiap detik di Ramadhan adalah emas. Jangan disia-siakan! ‚è≥",
      "Puasa bukan hanya menahan lapar, tapi juga meningkatkan kualitas diri! üåü",
      "Checklist selesai semua? Kamu hebat! üéØ",
      "Jangan Kendor, Ramadhan cuma setahun sekali! üòä"
    ];
    
    // Show random quote every 30 seconds
    setInterval(() => {
  const quote = quotes[Math.floor(Math.random() * quotes.length)];
  let toast = document.querySelector('.motivation-toast');
  if (!toast) {
    toast = document.createElement('div');
    toast.className = 'motivation-toast';
    document.body.appendChild(toast);
  }
  toast.innerHTML = `<strong>Motivasi</strong> ${quote}`;
  toast.classList.remove('show');
  setTimeout(() => toast.classList.add('show'), 100);
  setTimeout(() => toast.classList.remove('show'), 8000);
}, 30000);

  </script>
</body>
</html>
